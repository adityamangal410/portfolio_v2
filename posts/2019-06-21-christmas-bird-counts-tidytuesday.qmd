---
title: 'Christmas Bird Counts: TidyTuesday'
author: Aditya Mangal
date: '2019-06-21'
categories:
- TidyTuesday
keywords:
- tech
- DataAnalysis
- R
- Visualizations
- TidyTuesday
summary: Visualizing bird watching data as collected in Hamilton area of Ontario during
  Christmas time since 1921
readingtime: '10'
draft: false
format:
  html:
    theme: distill
freeze: true
output-file: christmas-bird-counts-tidytuesday.html
image: https://lh3.googleusercontent.com/K6bZi7jApSS0bpjxtxuRF5HrpBw5YLUDiWlnVFrIhjY3Wqzrt6PzprlbEzRjDLZ11sStS6eISkmeg6nk44ZVV-X4g4ZFYx3QO7njbWd_NfEg_89NjdKOU__H9qWTbotQe34RmZyZd3_cw5UK00Fmf3LbTQnlUpmIam5EIy9T9m-Yweq09kxPPmjKTQmuZxx3wDzfNFgBHJ5B_FjQ4_NHnKnsWWHcjnR9TXrZ6GHtYt0sNSiMVvFki1KsTO3qxtl6Ecas-PrNgC8cXgiqp-Oe_U56KavqjDyyKmMEOJRRbi1SurquuqyLyCuZqWJQabQx4EXOMVwf53RoC38juXtfZZnpM6YAPnPdaWhjGXS1IcR7jXFelru9QGaPk_qTgc7l_3ysvStoig8Xfzbae2TTVK8z9YepwoT_JmbWIpmpTvr9ad6qMngMq6LPy-hAV4dvYDif4u3b3GY4pz68qKPfd0W1BnA7a7HG0iBIMsAhkd9lWhH629M6_p4FUNW1fm9pIzItMp9BIqZoe7ECmqmJgAdZTtXvTUY9B5rJC7Yazh5JKeuF3Q9dgx9u2kEq9YDk5GOD5ULkBv5cDNTBL9B-0KAvLkaagqGXhuHzFDTJvqssUEBHUdNeeNZBuEllc_6KhGkL_FXV4n-TJF3sWmpwkBExY8y7Px1n2_OGZvSY6jcIR_VTKtpYh_spyQtu-KNTwfvXW6BgyckPWQQekz0VqX3OaA=w2748-h1832-no
image-alt: Photo by Wynand van Poortvliet on Unsplash
---

# Introduction
Visualizing bird watching data as collected in Hamilton area of Ontario during Christmas time since 1921.
Working on the weekly social data project [Tidy Tuesday](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-06-18).

# Analysis

## Load libraries
```r
rm(list = ls())
library(tidyverse)
library(lubridate)
library(ggplot2)
library(gganimate)
library(gridExtra)
library(scales)
theme_set(theme_light())
```
```r
bird_counts <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-06-18/bird_counts.csv")

bird_counts
```
```
## # A tibble: 18,706 x 6
##     year species    species_latin  how_many_counted total_hours how_many_counte…
##    <dbl> <chr>      <chr>                     <dbl>       <dbl>            <dbl>
##  1  1921 American … Botaurus lent…                0           8            0
##  2  1921 American … Anas rubripes                 0           8            0
##  3  1921 American … Fulica americ…                0           8            0
##  4  1921 American … Corvus brachy…                0           8            0
##  5  1921 American … Spinus tristis                0           8            0
##  6  1921 American … Falco sparver…                0           8            0
##  7  1921 American … Anthus rubesc…                0           8            0
##  8  1921 American … Turdus migrat…                1           8            0.125
##  9  1921 American … Picoides dors…                0           8            0
## 10  1921 American … Spizelloides …               12           8            1.5
## # … with 18,696 more rows
```
```r
bird_counts %>%
  summary
```
```
##       year        species          species_latin      how_many_counted
##  Min.   :1921   Length:18706       Length:18706       Min.   :    0.0
##  1st Qu.:1947   Class :character   Class :character   1st Qu.:    0.0
##  Median :1970   Mode  :character   Mode  :character   Median :    0.0
##  Mean   :1970                                         Mean   :  193.5
##  3rd Qu.:1994                                         3rd Qu.:    5.0
##  Max.   :2017                                         Max.   :73000.0
##
##   total_hours    how_many_counted_by_hour
##  Min.   :  8.0   Min.   :  0.000
##  1st Qu.:149.5   1st Qu.:  0.000
##  Median :171.0   Median :  0.000
##  Mean   :170.8   Mean   :  1.336
##  3rd Qu.:203.8   3rd Qu.:  0.051
##  Max.   :251.0   Max.   :439.024
##  NA's   :3781    NA's   :3781
```

## Which are the 5 most common birds over years?
```r
bird_counts %>%
  group_by(year) %>%
  mutate(rank = min_rank(-how_many_counted) * 1) %>%
  ungroup() %>%
  filter(rank <= 5) %>%
  ggplot(aes(rank,
             group = species,
             fill = as.factor(species),
             color = as.factor(species))) +
  geom_tile(aes(y = how_many_counted/2,
                height = how_many_counted,
                width = 0.9),
            alpha = 0.8,
            color = NA) +
  geom_text(aes(y = 0,
                label = paste(species, " ")),
            vjust = 0.2,
            hjust = 1) +
  coord_flip(clip = "off",
             expand = FALSE) +
  scale_y_continuous(labels = scales::comma) +
  scale_x_reverse() +
  guides(color = FALSE,
         fill = FALSE) +
  labs(title = '{closest_state}',
       subtitle = "Which are the 5 most common birds over years? Birds seen in the Hamilton area of Ontario during Christmas since 1921",
       caption = "Based on data from @BirdsCanada",
       x = "",
       y = "Sights per year") +
  theme(plot.title = element_text(hjust = 0, size = 22),
        axis.ticks.y = element_blank(),
        axis.text.y = element_blank(),
        plot.margin = margin(1,1,1,4,"cm")) +
  transition_states(year, transition_length = 4, state_length = 1) +
  ease_aes('cubic-in-out') -> p
```
```r
p %>%
  animate(fps = 5,
          nframes = 200,
          duration = 30,
          width = 800,
          height = 600,
          renderer = gifski_renderer("../data/christmas_bird_counts/most_common.gif"))
```
<img src="/post/2019-06-21-christmas-bird-counts-tidytuesday_files/figure-html/unnamed-chunk-5-1.gif" /><!-- -->
